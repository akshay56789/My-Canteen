{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _wrapNativeSuper = require(\"@babel/runtime/helpers/wrapNativeSuper\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar parseErrorStack_1 = __importDefault(require(\"../parseErrorStack\"));\n\nvar SyntheticError = function (_Error) {\n  _inherits(SyntheticError, _Error);\n\n  var _super = _createSuper(SyntheticError);\n\n  function SyntheticError() {\n    var _this;\n\n    _classCallCheck(this, SyntheticError);\n\n    _this = _super.apply(this, arguments);\n    _this.name = \"\";\n    return _this;\n  }\n\n  return _createClass(SyntheticError);\n}(_wrapNativeSuper(Error));\n\nvar exceptionID = 0;\n\nfunction parseException(e, isFatal) {\n  var stack = (0, parseErrorStack_1.default)(e === null || e === void 0 ? void 0 : e.stack);\n  var currentExceptionID = ++exceptionID;\n  var originalMessage = e.message || \"\";\n  var message = originalMessage;\n\n  if (e.componentStack != null) {\n    message += \"\\n\\nThis error is located at:\" + e.componentStack;\n  }\n\n  var namePrefix = e.name == null || e.name === \"\" ? \"\" : e.name + \": \";\n\n  if (!message.startsWith(namePrefix)) {\n    message = namePrefix + message;\n  }\n\n  message = e.jsEngine == null ? message : message + \", js engine: \" + e.jsEngine;\n  var data = {\n    message: message,\n    originalMessage: message === originalMessage ? null : originalMessage,\n    name: e.name == null || e.name === \"\" ? null : e.name,\n    componentStack: typeof e.componentStack === \"string\" ? e.componentStack : null,\n    stack: stack,\n    id: currentExceptionID,\n    isFatal: isFatal,\n    extraData: {\n      jsEngine: e.jsEngine,\n      rawStack: e.stack\n    }\n  };\n  return _objectSpread(_objectSpread({}, data), {}, {\n    isComponentError: !!e.isComponentError\n  });\n}\n\nfunction handleException(e) {\n  var error;\n\n  if (e instanceof Error) {\n    error = e;\n  } else {\n    error = new SyntheticError(e);\n  }\n\n  require(\"../../LogBox\").addException(parseException(error, true));\n}\n\nvar ErrorUtils = {\n  parseException: parseException,\n  handleException: handleException,\n  SyntheticError: SyntheticError\n};\nmodule.exports = ErrorUtils;\nexports.default = ErrorUtils;","map":{"version":3,"sources":["../../../../src/error-overlay/modules/ExceptionsManager/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,IAAA,iBAAA,GAAA,eAAA,CAAA,OAAA,sBAAA,CAAA;;IAIM,c;;;;;EAAN,0BAAA;IAAA;;IAAA;;;IACE,MAAA,IAAA,GAAe,EAAf;IADF;EAEC;;;mBAF4B,K;;AAO7B,IAAI,WAAW,GAAG,CAAlB;;AAEA,SAAS,cAAT,CAAwB,CAAxB,EAA0C,OAA1C,EAA0D;EACxD,IAAM,KAAK,GAAG,CAAA,GAAA,iBAAA,CAAA,OAAA,EAAgB,CAAC,KAAA,IAAD,IAAA,CAAC,KAAA,KAAA,CAAD,GAAC,KAAA,CAAD,GAAA,CAAC,CAAE,KAAnB,CAAd;EACA,IAAM,kBAAkB,GAAG,EAAE,WAA7B;EACA,IAAM,eAAe,GAAG,CAAC,CAAC,OAAF,IAAa,EAArC;EACA,IAAI,OAAO,GAAG,eAAd;;EACA,IAAI,CAAC,CAAC,cAAF,IAAoB,IAAxB,EAA8B;IAC5B,OAAO,sCAAoC,CAAC,CAAC,cAA7C;EACD;;EACD,IAAM,UAAU,GAAG,CAAC,CAAC,IAAF,IAAU,IAAV,IAAkB,CAAC,CAAC,IAAF,KAAW,EAA7B,GAAkC,EAAlC,GAA0C,CAAC,CAAC,IAA5C,OAAnB;;EAEA,IAAI,CAAC,OAAO,CAAC,UAAR,CAAmB,UAAnB,CAAL,EAAqC;IACnC,OAAO,GAAG,UAAU,GAAG,OAAvB;EACD;;EAED,OAAO,GACL,CAAC,CAAC,QAAF,IAAc,IAAd,GAAqB,OAArB,GAAkC,OAAlC,qBAAyD,CAAC,CAAC,QAD7D;EAGA,IAAM,IAAI,GAAG;IACX,OAAO,EAAP,OADW;IAEX,eAAe,EAAE,OAAO,KAAK,eAAZ,GAA8B,IAA9B,GAAqC,eAF3C;IAGX,IAAI,EAAE,CAAC,CAAC,IAAF,IAAU,IAAV,IAAkB,CAAC,CAAC,IAAF,KAAW,EAA7B,GAAkC,IAAlC,GAAyC,CAAC,CAAC,IAHtC;IAIX,cAAc,EACZ,OAAO,CAAC,CAAC,cAAT,KAA4B,QAA5B,GAAuC,CAAC,CAAC,cAAzC,GAA0D,IALjD;IAMX,KAAK,EAAL,KANW;IAOX,EAAE,EAAE,kBAPO;IAQX,OAAO,EAAP,OARW;IASX,SAAS,EAAE;MACT,QAAQ,EAAE,CAAC,CAAC,QADH;MAET,QAAQ,EAAE,CAAC,CAAC;IAFH;EATA,CAAb;EAeA,uCACK,IADL;IAEE,gBAAgB,EAAE,CAAC,CAAC,CAAC,CAAC;EAFxB;AAID;;AAKD,SAAS,eAAT,CAAyB,CAAzB,EAA+B;EAC7B,IAAI,KAAJ;;EACA,IAAI,CAAC,YAAY,KAAjB,EAAwB;IACtB,KAAK,GAAG,CAAR;EACD,CAFD,MAEO;IAKL,KAAK,GAAG,IAAI,cAAJ,CAAmB,CAAnB,CAAR;EACD;;EAED,OAAO,gBAAP,CAAwB,YAAxB,CAAqC,cAAc,CAAC,KAAD,EAAQ,IAAR,CAAnD;AACD;;AAED,IAAM,UAAU,GAAG;EACjB,cAAc,EAAd,cADiB;EAEjB,eAAe,EAAf,eAFiB;EAGjB,cAAc,EAAd;AAHiB,CAAnB;AAMA,MAAM,CAAC,OAAP,GAAiB,UAAjB;AACA,OAAA,CAAA,OAAA,GAAe,UAAf","sourcesContent":["/**\n * Copyright (c) Evan Bacon.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport parseErrorStack from \"../parseErrorStack\";\n\ntype ExtendedError = any;\n\nclass SyntheticError extends Error {\n  name: string = \"\";\n}\n\n/**\n * Handles the developer-visible aspect of errors and exceptions\n */\nlet exceptionID = 0;\n\nfunction parseException(e: ExtendedError, isFatal: boolean) {\n  const stack = parseErrorStack(e?.stack);\n  const currentExceptionID = ++exceptionID;\n  const originalMessage = e.message || \"\";\n  let message = originalMessage;\n  if (e.componentStack != null) {\n    message += `\\n\\nThis error is located at:${e.componentStack}`;\n  }\n  const namePrefix = e.name == null || e.name === \"\" ? \"\" : `${e.name}: `;\n\n  if (!message.startsWith(namePrefix)) {\n    message = namePrefix + message;\n  }\n\n  message =\n    e.jsEngine == null ? message : `${message}, js engine: ${e.jsEngine}`;\n\n  const data = {\n    message,\n    originalMessage: message === originalMessage ? null : originalMessage,\n    name: e.name == null || e.name === \"\" ? null : e.name,\n    componentStack:\n      typeof e.componentStack === \"string\" ? e.componentStack : null,\n    stack,\n    id: currentExceptionID,\n    isFatal,\n    extraData: {\n      jsEngine: e.jsEngine,\n      rawStack: e.stack,\n    },\n  };\n\n  return {\n    ...data,\n    isComponentError: !!e.isComponentError,\n  };\n}\n\n/**\n * Logs exceptions to the (native) console and displays them\n */\nfunction handleException(e: any) {\n  let error: Error;\n  if (e instanceof Error) {\n    error = e;\n  } else {\n    // Workaround for reporting errors caused by `throw 'some string'`\n    // Unfortunately there is no way to figure out the stacktrace in this\n    // case, so if you ended up here trying to trace an error, look for\n    // `throw '<error message>'` somewhere in your codebase.\n    error = new SyntheticError(e);\n  }\n\n  require(\"../../LogBox\").addException(parseException(error, true));\n}\n\nconst ErrorUtils = {\n  parseException,\n  handleException,\n  SyntheticError,\n};\n\nmodule.exports = ErrorUtils;\nexport default ErrorUtils;\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}