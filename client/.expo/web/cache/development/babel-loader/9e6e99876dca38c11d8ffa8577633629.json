{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nexport default function CartReducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ITEM\":\n      {\n        var findIndex = state.cart.findIndex(function (item) {\n          return item.id == action.payload.id;\n        });\n        newCart = _toConsumableArray(state.cart);\n\n        if (newCart.length && action.payload.cId !== newCart[newCart.length - 1].cId) {\n          newCart = [];\n        }\n\n        if (findIndex != -1) {\n          newCart = newCart.map(function (item) {\n            return item.id == action.payload.id ? _objectSpread(_objectSpread({}, item), {}, {\n              qty: item.qty + 1\n            }) : item;\n          });\n        } else {\n          newCart = [].concat(_toConsumableArray(newCart), [action.payload]);\n        }\n\n        return {\n          cart: _toConsumableArray(newCart)\n        };\n      }\n\n    case \"REMOVE_ITEM\":\n      {\n        newItems = _toConsumableArray(state.cart);\n        var quantity = state.cart.find(function (item) {\n          return item.id == action.payload;\n        }).qty;\n\n        if (quantity > 1) {\n          newItems = newItems.map(function (item) {\n            return item.id === action.payload ? _objectSpread(_objectSpread({}, item), {}, {\n              qty: item.qty - 1\n            }) : item;\n          });\n        } else {\n          var index = state.cart.findIndex(function (item) {\n            return item.id == action.payload;\n          });\n          newItems.splice(index, 1);\n        }\n\n        return {\n          cart: _toConsumableArray(newItems)\n        };\n      }\n  }\n}","map":{"version":3,"names":["CartReducer","state","action","type","findIndex","cart","item","id","payload","newCart","length","cId","map","qty","newItems","quantity","find","index","splice"],"sources":["C:/Users/hello/OneDrive/Desktop/React-native/canteen-project/client/context/CartReducer.js"],"sourcesContent":["export default function CartReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"ADD_ITEM\": {\r\n      const findIndex = state.cart.findIndex(\r\n        (item) => item.id == action.payload.id\r\n      );\r\n\r\n      newCart = [...state.cart];\r\n      if (\r\n        newCart.length &&\r\n        action.payload.cId !== newCart[newCart.length - 1].cId\r\n      ) {\r\n        newCart = [];\r\n      }\r\n\r\n      if (findIndex != -1) {\r\n        newCart = newCart.map((item) =>\r\n          item.id == action.payload.id ? { ...item, qty: item.qty + 1 } : item\r\n        );\r\n      } else {\r\n        newCart = [...newCart, action.payload];\r\n      }\r\n\r\n      return {\r\n        cart: [...newCart],\r\n      };\r\n    }\r\n\r\n    case \"REMOVE_ITEM\": {\r\n      newItems = [...state.cart];\r\n      const quantity = state.cart.find((item) => item.id == action.payload).qty;\r\n\r\n      if (quantity > 1) {\r\n        newItems = newItems.map((item) =>\r\n          item.id === action.payload ? { ...item, qty: item.qty - 1 } : item\r\n        );\r\n      } else {\r\n        const index = state.cart.findIndex((item) => item.id == action.payload);\r\n        newItems.splice(index, 1);\r\n      }\r\n\r\n      return {\r\n        cart: [...newItems],\r\n      };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;AAAA,eAAe,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;EACjD,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,UAAL;MAAiB;QACf,IAAMC,SAAS,GAAGH,KAAK,CAACI,IAAN,CAAWD,SAAX,CAChB,UAACE,IAAD;UAAA,OAAUA,IAAI,CAACC,EAAL,IAAWL,MAAM,CAACM,OAAP,CAAeD,EAApC;QAAA,CADgB,CAAlB;QAIAE,OAAO,sBAAOR,KAAK,CAACI,IAAb,CAAP;;QACA,IACEI,OAAO,CAACC,MAAR,IACAR,MAAM,CAACM,OAAP,CAAeG,GAAf,KAAuBF,OAAO,CAACA,OAAO,CAACC,MAAR,GAAiB,CAAlB,CAAP,CAA4BC,GAFrD,EAGE;UACAF,OAAO,GAAG,EAAV;QACD;;QAED,IAAIL,SAAS,IAAI,CAAC,CAAlB,EAAqB;UACnBK,OAAO,GAAGA,OAAO,CAACG,GAAR,CAAY,UAACN,IAAD;YAAA,OACpBA,IAAI,CAACC,EAAL,IAAWL,MAAM,CAACM,OAAP,CAAeD,EAA1B,mCAAoCD,IAApC;cAA0CO,GAAG,EAAEP,IAAI,CAACO,GAAL,GAAW;YAA1D,KAAgEP,IAD5C;UAAA,CAAZ,CAAV;QAGD,CAJD,MAIO;UACLG,OAAO,gCAAOA,OAAP,IAAgBP,MAAM,CAACM,OAAvB,EAAP;QACD;;QAED,OAAO;UACLH,IAAI,qBAAMI,OAAN;QADC,CAAP;MAGD;;IAED,KAAK,aAAL;MAAoB;QAClBK,QAAQ,sBAAOb,KAAK,CAACI,IAAb,CAAR;QACA,IAAMU,QAAQ,GAAGd,KAAK,CAACI,IAAN,CAAWW,IAAX,CAAgB,UAACV,IAAD;UAAA,OAAUA,IAAI,CAACC,EAAL,IAAWL,MAAM,CAACM,OAA5B;QAAA,CAAhB,EAAqDK,GAAtE;;QAEA,IAAIE,QAAQ,GAAG,CAAf,EAAkB;UAChBD,QAAQ,GAAGA,QAAQ,CAACF,GAAT,CAAa,UAACN,IAAD;YAAA,OACtBA,IAAI,CAACC,EAAL,KAAYL,MAAM,CAACM,OAAnB,mCAAkCF,IAAlC;cAAwCO,GAAG,EAAEP,IAAI,CAACO,GAAL,GAAW;YAAxD,KAA8DP,IADxC;UAAA,CAAb,CAAX;QAGD,CAJD,MAIO;UACL,IAAMW,KAAK,GAAGhB,KAAK,CAACI,IAAN,CAAWD,SAAX,CAAqB,UAACE,IAAD;YAAA,OAAUA,IAAI,CAACC,EAAL,IAAWL,MAAM,CAACM,OAA5B;UAAA,CAArB,CAAd;UACAM,QAAQ,CAACI,MAAT,CAAgBD,KAAhB,EAAuB,CAAvB;QACD;;QAED,OAAO;UACLZ,IAAI,qBAAMS,QAAN;QADC,CAAP;MAGD;EA3CH;AA6CD"},"metadata":{},"sourceType":"module"}