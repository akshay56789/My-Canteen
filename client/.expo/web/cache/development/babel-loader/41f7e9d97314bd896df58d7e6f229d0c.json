{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"../axios\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { useContext, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { useRouter } from \"expo-router\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function Page() {\n  var router = useRouter();\n\n  var _useContext = useContext(AuthContext),\n      dispatch = _useContext.dispatch;\n\n  useEffect(function () {\n    var fetchUser = function () {\n      var _ref = _asyncToGenerator(function* () {\n        dispatch({\n          type: \"LOGIN_START\"\n        });\n        var token = yield AsyncStorage.getItem(\"auth-token\");\n\n        if (token) {\n          try {\n            var res = yield axios.get(\"/auth/user/getdetails\", {\n              headers: {\n                \"auth-token\": token\n              }\n            });\n\n            if (res.data) {\n              dispatch({\n                type: \"LOGIN_SUCCESS\",\n                payload: res.data\n              });\n              router.replace(\"/profile/home\");\n              return;\n            } else {\n              dispatch({\n                type: \"LOGIN_FAILURE\"\n              });\n            }\n          } catch (error) {\n            dispatch({\n              type: \"LOGIN_FAILURE\"\n            });\n          }\n        } else {\n          dispatch({\n            type: \"LOGIN_FAILURE\"\n          });\n        }\n\n        router.replace(\"/main\");\n      });\n\n      return function fetchUser() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchUser();\n  }, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(ActivityIndicator, {\n      size: 80\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"names":["axios","useContext","useEffect","AsyncStorage","AuthContext","useRouter","Page","router","dispatch","fetchUser","type","token","getItem","res","get","headers","data","payload","replace","error","styles","container","StyleSheet","create","flex","display","alignItems","justifyContent"],"sources":["C:/Users/hello/OneDrive/Desktop/React-native/canteen-project/client/app/index.js"],"sourcesContent":["import axios from \"../axios\";\nimport { View, ActivityIndicator, StyleSheet } from \"react-native\";\nimport { useContext, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { useRouter } from \"expo-router\";\n\nexport default function Page() {\n  const router = useRouter();\n  const { dispatch } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      dispatch({ type: \"LOGIN_START\" });\n      const token = await AsyncStorage.getItem(\"auth-token\");\n\n      if (token) {\n        try {\n          const res = await axios.get(\"/auth/user/getdetails\", {\n            headers: {\n              \"auth-token\": token,\n            },\n          });\n\n          if (res.data) {\n            dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n            router.replace(\"/profile/home\");\n\n            return;\n          } else {\n            dispatch({ type: \"LOGIN_FAILURE\" });\n          }\n        } catch (error) {\n          dispatch({ type: \"LOGIN_FAILURE\" });\n        }\n      } else {\n        dispatch({ type: \"LOGIN_FAILURE\" });\n      }\n\n      router.replace(\"/main\");\n    };\n\n    fetchUser();\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <ActivityIndicator size={80} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n"],"mappings":";AAAA,OAAOA,KAAP;;;;AAEA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,WAAT;AACA,SAASC,SAAT,QAA0B,aAA1B;;AAEA,eAAe,SAASC,IAAT,GAAgB;EAC7B,IAAMC,MAAM,GAAGF,SAAS,EAAxB;;EACA,kBAAqBJ,UAAU,CAACG,WAAD,CAA/B;EAAA,IAAQI,QAAR,eAAQA,QAAR;;EAEAN,SAAS,CAAC,YAAM;IACd,IAAMO,SAAS;MAAA,6BAAG,aAAY;QAC5BD,QAAQ,CAAC;UAAEE,IAAI,EAAE;QAAR,CAAD,CAAR;QACA,IAAMC,KAAK,SAASR,YAAY,CAACS,OAAb,CAAqB,YAArB,CAApB;;QAEA,IAAID,KAAJ,EAAW;UACT,IAAI;YACF,IAAME,GAAG,SAASb,KAAK,CAACc,GAAN,CAAU,uBAAV,EAAmC;cACnDC,OAAO,EAAE;gBACP,cAAcJ;cADP;YAD0C,CAAnC,CAAlB;;YAMA,IAAIE,GAAG,CAACG,IAAR,EAAc;cACZR,QAAQ,CAAC;gBAAEE,IAAI,EAAE,eAAR;gBAAyBO,OAAO,EAAEJ,GAAG,CAACG;cAAtC,CAAD,CAAR;cACAT,MAAM,CAACW,OAAP,CAAe,eAAf;cAEA;YACD,CALD,MAKO;cACLV,QAAQ,CAAC;gBAAEE,IAAI,EAAE;cAAR,CAAD,CAAR;YACD;UACF,CAfD,CAeE,OAAOS,KAAP,EAAc;YACdX,QAAQ,CAAC;cAAEE,IAAI,EAAE;YAAR,CAAD,CAAR;UACD;QACF,CAnBD,MAmBO;UACLF,QAAQ,CAAC;YAAEE,IAAI,EAAE;UAAR,CAAD,CAAR;QACD;;QAEDH,MAAM,CAACW,OAAP,CAAe,OAAf;MACD,CA5Bc;;MAAA,gBAATT,SAAS;QAAA;MAAA;IAAA,GAAf;;IA8BAA,SAAS;EACV,CAhCQ,EAgCN,EAhCM,CAAT;EAkCA,OACE,KAAC,IAAD;IAAM,KAAK,EAAEW,MAAM,CAACC,SAApB;IAAA,UACE,KAAC,iBAAD;MAAmB,IAAI,EAAE;IAAzB;EADF,EADF;AAKD;AAED,IAAMD,MAAM,GAAGE,UAAU,CAACC,MAAX,CAAkB;EAC/BF,SAAS,EAAE;IACTG,IAAI,EAAE,CADG;IAETC,OAAO,EAAE,MAFA;IAGTC,UAAU,EAAE,QAHH;IAITC,cAAc,EAAE;EAJP;AADoB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}