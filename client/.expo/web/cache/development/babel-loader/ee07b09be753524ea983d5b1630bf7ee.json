{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport axios from \"../axios\";\nimport { Link, useRouter } from \"expo-router\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useContext = useContext(AuthContext),\n      dispatch = _useContext.dispatch;\n\n  var router = useRouter();\n\n  var login = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var credentials = {\n        email: email,\n        password: password\n      };\n      var res = yield axios.post(\"/auth/user/signin\", credentials);\n\n      if (res.status == 200) {\n        yield AsyncStorage.setItem(\"auth-token\", res.data.token);\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: res.data.user\n        });\n        router.replace(\"/profile/home\");\n      } else {\n        console.log(\"Something went wrong!\");\n      }\n    });\n\n    return function login() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: {\n        fontSize: 30,\n        fontWeight: 600\n      },\n      children: \"Login\"\n    }), _jsxs(View, {\n      style: {\n        display: \"flex\",\n        gap: 10,\n        marginVertical: 32\n      },\n      children: [_jsx(TextInput, {\n        value: email,\n        onChangeText: function onChangeText(text) {\n          return setEmail(text);\n        },\n        placeholder: \"Email ID\",\n        style: styles.inputContainer\n      }), _jsx(TextInput, {\n        value: password,\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        secureTextEntry: true,\n        placeholder: \"Password\",\n        style: styles.inputContainer\n      })]\n    }), _jsx(TouchableOpacity, {\n      style: styles.button,\n      onPress: login,\n      children: _jsx(Text, {\n        style: {\n          color: \"white\",\n          textAlign: \"center\",\n          fontSize: 16\n        },\n        children: \"Login\"\n      })\n    }), _jsxs(Text, {\n      style: {\n        textAlign: \"center\",\n        marginTop: 15,\n        fontSize: 16\n      },\n      children: [\"Don't have an account?\", \" \", _jsx(Link, {\n        href: \"/signup\",\n        style: {\n          color: \"#FF4136\"\n        },\n        children: \"Signup\"\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"center\",\n    paddingHorizontal: 20\n  },\n  inputContainer: {\n    padding: 10,\n    backgroundColor: \"#efeeea\",\n    borderRadius: 5\n  },\n  button: {\n    backgroundColor: \"#FF4136\",\n    paddingVertical: 10,\n    borderRadius: 5\n  }\n});","map":{"version":3,"names":["useContext","useState","AuthContext","AsyncStorage","axios","Link","useRouter","Login","email","setEmail","password","setPassword","dispatch","router","login","credentials","res","post","status","setItem","data","token","type","payload","user","replace","console","log","styles","container","fontSize","fontWeight","display","gap","marginVertical","text","inputContainer","button","color","textAlign","marginTop","StyleSheet","create","flex","justifyContent","paddingHorizontal","padding","backgroundColor","borderRadius","paddingVertical"],"sources":["C:/Users/hello/OneDrive/Desktop/React-native/canteen-project/client/app/login.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport axios from \"../axios\";\r\nimport { Link, useRouter } from \"expo-router\";\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { dispatch } = useContext(AuthContext);\r\n  const router = useRouter();\r\n\r\n  const login = async () => {\r\n    const credentials = {\r\n      email,\r\n      password,\r\n    };\r\n\r\n    const res = await axios.post(\"/auth/user/signin\", credentials);\r\n\r\n    if (res.status == 200) {\r\n      await AsyncStorage.setItem(\"auth-token\", res.data.token);\r\n\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data.user });\r\n      router.replace(\"/profile/home\");\r\n    } else {\r\n      console.log(\"Something went wrong!\");\r\n    }\r\n  };\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={{ fontSize: 30, fontWeight: 600 }}>Login</Text>\r\n\r\n      <View style={{ display: \"flex\", gap: 10, marginVertical: 32 }}>\r\n        <TextInput\r\n          value={email}\r\n          onChangeText={(text) => setEmail(text)}\r\n          placeholder=\"Email ID\"\r\n          style={styles.inputContainer}\r\n        />\r\n        <TextInput\r\n          value={password}\r\n          onChangeText={(text) => setPassword(text)}\r\n          secureTextEntry={true}\r\n          placeholder=\"Password\"\r\n          style={styles.inputContainer}\r\n        />\r\n      </View>\r\n\r\n      <TouchableOpacity style={styles.button} onPress={login}>\r\n        <Text style={{ color: \"white\", textAlign: \"center\", fontSize: 16 }}>\r\n          Login\r\n        </Text>\r\n      </TouchableOpacity>\r\n\r\n      <Text style={{ textAlign: \"center\", marginTop: 15, fontSize: 16 }}>\r\n        Don't have an account?{\" \"}\r\n        <Link href=\"/signup\" style={{ color: \"#FF4136\" }}>\r\n          Signup\r\n        </Link>\r\n      </Text>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    paddingHorizontal: 20,\r\n  },\r\n\r\n  inputContainer: {\r\n    padding: 10,\r\n    backgroundColor: \"#efeeea\",\r\n    borderRadius: 5,\r\n  },\r\n  button: {\r\n    backgroundColor: \"#FF4136\",\r\n    paddingVertical: 10,\r\n    borderRadius: 5,\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}