{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getStackFormattedLocation = exports.formatProjectFilePath = void 0;\n\nfunction formatProjectFilePath(projectRoot, file) {\n  if (file == null) {\n    return \"<unknown>\";\n  }\n\n  return pathRelativeToPath(file.replace(/\\\\/g, \"/\"), projectRoot.replace(/\\\\/g, \"/\")).replace(/\\?.*$/, \"\");\n}\n\nexports.formatProjectFilePath = formatProjectFilePath;\n\nfunction pathRelativeToPath(path, relativeTo) {\n  var sep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"/\";\n  var relativeToParts = relativeTo.split(sep);\n  var pathParts = path.split(sep);\n  var i = 0;\n\n  while (i < relativeToParts.length && i < pathParts.length) {\n    if (relativeToParts[i] !== pathParts[i]) {\n      break;\n    }\n\n    i++;\n  }\n\n  return pathParts.slice(i).join(sep);\n}\n\nfunction getStackFormattedLocation(projectRoot, frame) {\n  var column = frame.column != null && parseInt(String(frame.column), 10);\n  var location = formatProjectFilePath(projectRoot, frame.file) + (frame.lineNumber != null ? \":\" + frame.lineNumber + (column && !isNaN(column) ? \":\" + (column + 1) : \"\") : \"\");\n  return location;\n}\n\nexports.getStackFormattedLocation = getStackFormattedLocation;","map":{"version":3,"sources":["../../src/error-overlay/formatProjectFilePath.ts"],"names":[],"mappings":";;;;;;;AAIA,SAAgB,qBAAhB,CACE,WADF,EAEE,IAFF,EAEsB;EAEpB,IAAI,IAAI,IAAI,IAAZ,EAAkB;IAChB,OAAO,WAAP;EACD;;EAED,OAAO,kBAAkB,CACvB,IAAI,CAAC,OAAL,CAAa,KAAb,EAAoB,GAApB,CADuB,EAEvB,WAAW,CAAC,OAAZ,CAAoB,KAApB,EAA2B,GAA3B,CAFuB,CAAlB,CAGL,OAHK,CAGG,OAHH,EAGY,EAHZ,CAAP;AAID;;AAZD,OAAA,CAAA,qBAAA,GAAA,qBAAA;;AAcA,SAAS,kBAAT,CAA4B,IAA5B,EAA0C,UAA1C,EAAuE;EAAA,IAAT,GAAS,uEAAH,GAAG;EACrE,IAAM,eAAe,GAAG,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAxB;EACA,IAAM,SAAS,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,CAAlB;EACA,IAAI,CAAC,GAAG,CAAR;;EACA,OAAO,CAAC,GAAG,eAAe,CAAC,MAApB,IAA8B,CAAC,GAAG,SAAS,CAAC,MAAnD,EAA2D;IACzD,IAAI,eAAe,CAAC,CAAD,CAAf,KAAuB,SAAS,CAAC,CAAD,CAApC,EAAyC;MACvC;IACD;;IACD,CAAC;EACF;;EACD,OAAO,SAAS,CAAC,KAAV,CAAgB,CAAhB,EAAmB,IAAnB,CAAwB,GAAxB,CAAP;AACD;;AAED,SAAgB,yBAAhB,CACE,WADF,EAEE,KAFF,EAEwB;EAEtB,IAAM,MAAM,GAAG,KAAK,CAAC,MAAN,IAAgB,IAAhB,IAAwB,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAP,CAAP,EAAuB,EAAvB,CAA/C;EACA,IAAM,QAAQ,GACZ,qBAAqB,CAAC,WAAD,EAAc,KAAK,CAAC,IAApB,CAArB,IACC,KAAK,CAAC,UAAN,IAAoB,IAApB,GACG,MACA,KAAK,CAAC,UADN,IAEC,MAAM,IAAI,CAAC,KAAK,CAAC,MAAD,CAAhB,GAA2B,OAAO,MAAM,GAAG,CAAhB,CAA3B,GAAgD,EAFjD,CADH,GAIG,EALJ,CADF;EAQA,OAAO,QAAP;AACD;;AAdD,OAAA,CAAA,yBAAA,GAAA,yBAAA","sourcesContent":["import type { StackFrame } from \"stacktrace-parser\";\n\nexport type MetroStackFrame = StackFrame & { collapse?: boolean };\n\nexport function formatProjectFilePath(\n  projectRoot: string,\n  file?: string | null\n): string {\n  if (file == null) {\n    return \"<unknown>\";\n  }\n\n  return pathRelativeToPath(\n    file.replace(/\\\\/g, \"/\"),\n    projectRoot.replace(/\\\\/g, \"/\")\n  ).replace(/\\?.*$/, \"\");\n}\n\nfunction pathRelativeToPath(path: string, relativeTo: string, sep = \"/\") {\n  const relativeToParts = relativeTo.split(sep);\n  const pathParts = path.split(sep);\n  let i = 0;\n  while (i < relativeToParts.length && i < pathParts.length) {\n    if (relativeToParts[i] !== pathParts[i]) {\n      break;\n    }\n    i++;\n  }\n  return pathParts.slice(i).join(sep);\n}\n\nexport function getStackFormattedLocation(\n  projectRoot: string,\n  frame: MetroStackFrame\n) {\n  const column = frame.column != null && parseInt(String(frame.column), 10);\n  const location =\n    formatProjectFilePath(projectRoot, frame.file) +\n    (frame.lineNumber != null\n      ? \":\" +\n        frame.lineNumber +\n        (column && !isNaN(column) ? \":\" + (column + 1) : \"\")\n      : \"\");\n\n  return location;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}